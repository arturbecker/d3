<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Force Tutorial</title>
</head>
<body>

<h1>Force Tutorial</h1>
<canvas id="network" width="500" height="500"></canvas>

<script src="https://d3js.org/d3.v4.min.js"></script>

<script>
/* global d3 */



var canvas = d3.select("#network"),
  width = canvas.attr("width"),
  height = canvas.attr("height"),
  ctx = canvas.node().getContext("2d"),
  r = 3,
  color = d3.scaleOrdinal(d3.schemeCategory20),
  simulation = d3.forceSimulation()
    .force("x", d3.forceX(width/2))
    .force("y", d3.forceY(height/2))
    .force("collide", d3.forceCollide(r+1))
    .force("charge", d3.forceManyBody()
      .strength(-20))
    .force("link", d3.forceLink()
      .id(function (d) { return d.name; }));


d3.json({"nodes": [{"ID":"10.1109\/TVCG.2018.2868591","Year":2018.0,"Category":1.0},{"ID":"10.1109\/TLT.2017.2739747","Year":2018.0,"Category":6.0},{"ID":"10.1109\/RBME.2017.2749527","Year":2017.0,"Category":6.0},{"ID":"10.1109\/TLT.2013.37","Year":2014.0,"Category":6.0},{"ID":"10.1109\/ISMAR.2011.6092387","Year":2011.0,"Category":2.0},{"ID":"10.1007\/s10916-019-1193-9","Year":2019.0,"Category":9.0},{"ID":"10.1145\/3316782.3316789","Year":2019.0,"Category":7.0},{"ID":"10.1080\/0144929X.2016.1212929","Year":2016.0,"Category":7.0},{"ID":"10.1007\/s10055-013-0237-6","Year":2014.0,"Category":1.0},{"ID":"10.1016\/j.ijmedinf.2019.03.009","Year":2019.0,"Category":9.0},{"ID":"10.1016\/j.rehab.2019.04.004","Year":2019.0,"Category":5.0},{"ID":"10.1016\/j.artmed.2018.08.007","Year":2019.0,"Category":5.0},{"ID":"10.1016\/j.chb.2019.05.026","Year":2019.0,"Category":1.0},{"ID":"10.1016\/j.trci.2019.09.016","Year":2019.0,"Category":8.0},{"ID":"10.1016\/j.jstrokecerebrovasdis.2019.03.054","Year":2019.0,"Category":9.0},{"ID":"10.1016\/j.apmr.2018.09.123","Year":2019.0,"Category":6.0},{"ID":"10.1016\/j.compbiomed.2019.03.012","Year":2019.0,"Category":3.0},{"ID":"10.1016\/j.jebdp.2019.01.009","Year":2019.0,"Category":8.0},{"ID":"10.1016\/j.ijsu.2018.12.001","Year":2019.0,"Category":1.0},{"ID":"10.1016\/j.edurev.2019.04.001","Year":2019.0,"Category":8.0},{"ID":"10.1016\/j.compedu.2019.05.003","Year":2019.0,"Category":3.0},{"ID":"10.1016\/j.janxdis.2018.06.005","Year":2019.0,"Category":8.0},{"ID":"10.1016\/j.jad.2019.07.086","Year":2019.0,"Category":1.0},{"ID":"10.1016\/j.medengphy.2018.11.002","Year":2019.0,"Category":9.0},{"ID":"10.1016\/j.rehab.2018.09.006","Year":2019.0,"Category":3.0},{"ID":"10.1016\/j.ijmedinf.2018.12.001","Year":2019.0,"Category":1.0},{"ID":"10.1016\/j.janxdis.2018.08.003","Year":2019.0,"Category":4.0},{"ID":"10.1016\/j.ijom.2018.09.010","Year":2019.0,"Category":9.0},{"ID":"10.1016\/j.parkreldis.2018.11.013","Year":2019.0,"Category":3.0},{"ID":"10.1016\/j.janxdis.2018.06.006","Year":2019.0,"Category":2.0},{"ID":"10.1016\/j.jocn.2019.04.026","Year":2019.0,"Category":6.0},{"ID":"10.1016\/j.ajp.2016.06.013","Year":2018.0,"Category":7.0},{"ID":"10.1016\/j.chb.2018.04.019","Year":2018.0,"Category":9.0},{"ID":"10.1016\/j.pmrj.2018.10.001","Year":2018.0,"Category":1.0},{"ID":"10.1016\/j.burns.2017.11.019","Year":2018.0,"Category":9.0},{"ID":"10.1016\/j.burns.2017.11.002","Year":2018.0,"Category":8.0},{"ID":"10.1016\/j.ijrobp.2018.05.064","Year":2018.0,"Category":4.0},{"ID":"10.1016\/j.wneu.2017.11.132","Year":2018.0,"Category":1.0},{"ID":"10.1016\/j.pmedr.2018.06.015","Year":2018.0,"Category":5.0},{"ID":"10.1016\/j.compedu.2018.05.002","Year":2018.0,"Category":4.0},{"ID":"10.1016\/j.addbeh.2018.01.036","Year":2018.0,"Category":2.0},{"ID":"10.1016\/j.compedu.2018.09.002","Year":2018.0,"Category":7.0},{"ID":"10.1016\/j.tele.2017.11.002","Year":2018.0,"Category":5.0},{"ID":"10.1016\/j.physio.2016.08.004","Year":2017.0,"Category":5.0},{"ID":"10.1016\/j.spinee.2017.05.016","Year":2017.0,"Category":1.0},{"ID":"10.1016\/j.jand.2016.12.014","Year":2017.0,"Category":6.0},{"ID":"10.1016\/j.chb.2017.01.013","Year":2017.0,"Category":4.0},{"ID":"10.1016\/j.rehab.2015.12.004","Year":2017.0,"Category":3.0},{"ID":"10.1016\/j.jsurg.2017.02.007","Year":2017.0,"Category":8.0},{"ID":"10.1016\/j.chb.2017.03.007","Year":2017.0,"Category":9.0},{"ID":"10.1016\/j.rcpeng.2017.06.005","Year":2017.0,"Category":4.0},{"ID":"10.1016\/j.media.2017.01.007","Year":2017.0,"Category":9.0},{"ID":"10.1016\/j.edurev.2016.11.002","Year":2017.0,"Category":6.0},{"ID":"10.1016\/j.nrleng.2015.06.007","Year":2016.0,"Category":5.0},{"ID":"10.1016\/j.ejvs.2015.10.011","Year":2016.0,"Category":3.0},{"ID":"10.1016\/j.jsurg.2016.04.006","Year":2016.0,"Category":9.0},{"ID":"10.1016\/j.chb.2015.08.029","Year":2016.0,"Category":6.0},{"ID":"10.1016\/j.eururo.2015.09.021","Year":2016.0,"Category":1.0},{"ID":"10.1016\/j.janxdis.2016.06.007","Year":2016.0,"Category":8.0},{"ID":"10.1016\/j.ijsu.2016.03.034","Year":2016.0,"Category":7.0},{"ID":"10.1016\/j.arthro.2015.07.023","Year":2016.0,"Category":4.0},{"ID":"10.1016\/j.ophtha.2015.02.028","Year":2015.0,"Category":3.0},{"ID":"10.1016\/j.avb.2015.05.012","Year":2015.0,"Category":1.0},{"ID":"10.1016\/j.ijnurstu.2015.04.004","Year":2015.0,"Category":3.0},{"ID":"10.1016\/j.jagp.2014.04.009","Year":2015.0,"Category":5.0},{"ID":"10.1016\/j.jphys.2015.05.017","Year":2015.0,"Category":5.0},{"ID":"10.1016\/j.jsurg.2014.07.003","Year":2015.0,"Category":5.0},{"ID":"10.1016\/j.compind.2014.12.002","Year":2015.0,"Category":8.0},{"ID":"10.1016\/j.cpr.2014.10.003","Year":2014.0,"Category":1.0},{"ID":"10.1016\/j.ijsu.2014.04.005","Year":2014.0,"Category":9.0},{"ID":"10.1016\/j.compedu.2013.07.033","Year":2014.0,"Category":9.0},{"ID":"10.1016\/j.eururo.2013.07.033","Year":2014.0,"Category":4.0},{"ID":"10.1016\/j.ijsu.2013.11.007","Year":2014.0,"Category":4.0},{"ID":"10.1016\/j.neubiorev.2012.11.010","Year":2013.0,"Category":2.0},{"ID":"10.1016\/j.compmedimag.2013.01.009","Year":2013.0,"Category":7.0},{"ID":"10.1378\/chest.12-1786","Year":2013.0,"Category":1.0},{"ID":"10.1016\/j.pec.2010.11.014","Year":2011.0,"Category":2.0},{"ID":"10.1016\/j.juro.2011.02.2684","Year":2011.0,"Category":5.0},{"ID":"10.1016\/j.cpr.2010.07.001","Year":2010.0,"Category":6.0},{"ID":"978-1-4665-1184-2","Year":2014.0,"Category":null},{"ID":"https:\/\/www.britannica.com\/technology\/virtual-reality\/Living-in-virtual-worlds","Year":2015.0,"Category":null},{"ID":"10.1162\/pres.1997.6.4.355","Year":1997.0,"Category":null},{"ID":"0916-8532","Year":1994.0,"Category":null},{"ID":"8120179","Year":2012.0,"Category":null},{"ID":"10.1017\/CBO9780511545078.015","Year":2006.0,"Category":null},{"ID":"10.3233\/978-1-60750-888-5-3","Year":1997.0,"Category":null},{"ID":"10.1089\/cyber.2014.0682","Year":2016.0,"Category":null},{"ID":"10.1162\/pres.1997.6.6.603","Year":1997.0,"Category":null},{"ID":"10.1111\/j.1440-1630.2010.00897.x","Year":2011.0,"Category":null},{"ID":"10.1093\/ptj\/82.9.898","Year":2002.0,"Category":null},{"ID":"10.1038\/scientificamerican0402-48","Year":2002.0,"Category":null},{"ID":"10.1136\/bmj.323.7318.912","Year":2001.0,"Category":null},{"ID":"10.1109\/HICSS.1992.183317","Year":2002.0,"Category":null},{"ID":"10.1097\/00002508-200109000-00007","Year":2001.0,"Category":null},{"ID":"10.1109\/38.963459","Year":2001.0,"Category":null},{"ID":"10.1007\/s11042-010-0660-6","Year":2011.0,"Category":null},{"ID":"10.1016\/j.displa.2007.09.005","Year":2008.0,"Category":null},{"ID":"http:\/\/lavalle.pl\/vr\/","Year":2017.0,"Category":null},{"ID":"10.1145\/166117.166134","Year":1993.0,"Category":null},{"ID":"10.1177\/0883073814533007","Year":2014.0,"Category":null},{"ID":"10.1162\/105474603322955950","Year":2003.0,"Category":null},{"ID":"978-0201758672","Year":2004.0,"Category":null},{"ID":"10.1201\/b10368-12","Year":2002.0,"Category":null},{"ID":"10.1016\/j.jbtep.2007.07.007","Year":2008.0,"Category":null},{"ID":"10.3357\/ASEM.2277.2008","Year":2008.0,"Category":null},{"ID":"10.1089\/10949310050078779","Year":2000.0,"Category":null},{"ID":"10.1089\/109493103322278781","Year":2003.0,"Category":null},{"ID":"10.4018\/978-1-60960-854-5.ch016","Year":2012.0,"Category":null},{"ID":"10.1162\/1054746053967012","Year":2005.0,"Category":null},{"ID":"10.1097\/00001199-200210000-00002","Year":2002.0,"Category":null},{"ID":"10.1089\/109493101750527042","Year":2001.0,"Category":null},{"ID":"10.1016\/j.jneumeth.2013.07.005","Year":2013.0,"Category":null},{"ID":"978-0-671-69363-3","Year":1991.0,"Category":null},{"ID":"10.1162\/1054746011470208","Year":2001.0,"Category":null},{"ID":"10.1037\/0090-5550.46.3.296","Year":2001.0,"Category":null},{"ID":"10.1027\/1864-1105.21.3.95","Year":2009.0,"Category":null},{"ID":"10.1016\/j.ijhcs.2011.06.002","Year":2011.0,"Category":null},{"ID":"10.1002\/cpp.524","Year":2007.0,"Category":null},{"ID":"10.2217\/npy.11.5","Year":2011.0,"Category":null},{"ID":"10.1016\/j.beth.2005.04.004","Year":2006.0,"Category":null}],
  "links": [{"source":"10.1109\/TLT.2017.2739747","target":"978-1-4665-1184-2"},{"source":"10.1109\/RBME.2017.2749527","target":"https:\/\/www.britannica.com\/technology\/virtual-reality\/Living-in-virtual-worlds"},{"source":"10.1109\/RBME.2017.2749527","target":"10.1162\/pres.1997.6.4.355"},{"source":"10.1109\/TLT.2013.37","target":"10.1162\/pres.1997.6.4.355"},{"source":"10.1109\/TLT.2013.37","target":"0916-8532"},{"source":"10.1109\/ISMAR.2011.6092387","target":"10.1162\/pres.1997.6.4.355"},{"source":"10.1016\/j.ijmedinf.2019.03.009","target":"10.1016\/j.chb.2017.01.013"},{"source":"10.1016\/j.ijmedinf.2019.03.009","target":"8120179"},{"source":"10.1016\/j.rehab.2019.04.004","target":"10.1017\/CBO9780511545078.015"},{"source":"10.1016\/j.chb.2019.05.026","target":"0916-8532"},{"source":"10.1016\/j.trci.2019.09.016","target":"10.3233\/978-1-60750-888-5-3"},{"source":"10.1016\/j.trci.2019.09.016","target":"10.1089\/cyber.2014.0682"},{"source":"10.1016\/j.trci.2019.09.016","target":"10.1162\/pres.1997.6.6.603"},{"source":"10.1016\/j.jstrokecerebrovasdis.2019.03.054","target":"10.1111\/j.1440-1630.2010.00897.x"},{"source":"10.1016\/j.jstrokecerebrovasdis.2019.03.054","target":"10.1093\/ptj\/82.9.898"},{"source":"10.1016\/j.compbiomed.2019.03.012","target":"10.1038\/scientificamerican0402-48"},{"source":"10.1016\/j.compbiomed.2019.03.012","target":"10.1136\/bmj.323.7318.912"},{"source":"10.1016\/j.edurev.2019.04.001","target":"10.1109\/HICSS.1992.183317"},{"source":"10.1016\/j.edurev.2019.04.001","target":"10.1162\/pres.1997.6.4.355"},{"source":"10.1016\/j.edurev.2019.04.001","target":"10.1016\/j.edurev.2016.11.002"},{"source":"10.1016\/j.burns.2017.11.002","target":"10.1097\/00002508-200109000-00007"},{"source":"10.1016\/j.compedu.2018.05.002","target":"10.1162\/pres.1997.6.4.355"},{"source":"10.1016\/j.compedu.2018.05.002","target":"10.1109\/38.963459"},{"source":"10.1016\/j.compedu.2018.05.002","target":"10.1007\/s11042-010-0660-6"},{"source":"10.1016\/j.compedu.2018.09.002","target":"10.1016\/j.displa.2007.09.005"},{"source":"10.1016\/j.compedu.2018.09.002","target":"http:\/\/lavalle.pl\/vr\/"},{"source":"10.1016\/j.compedu.2018.09.002","target":"10.1145\/166117.166134"},{"source":"10.1016\/j.physio.2016.08.004","target":"10.1177\/0883073814533007"},{"source":"10.1016\/j.chb.2017.01.013","target":"10.1162\/105474603322955950"},{"source":"10.1016\/j.chb.2017.01.013","target":"10.1145\/166117.166134"},{"source":"10.1016\/j.chb.2017.01.013","target":"978-0201758672"},{"source":"10.1016\/j.chb.2017.01.013","target":"10.1201\/b10368-12"},{"source":"10.1016\/j.chb.2017.03.007","target":"10.1016\/j.jbtep.2007.07.007"},{"source":"10.1016\/j.chb.2017.03.007","target":"10.3357\/ASEM.2277.2008"},{"source":"10.1016\/j.media.2017.01.007","target":"0916-8532"},{"source":"10.1016\/j.edurev.2016.11.002","target":"10.1109\/38.963459"},{"source":"10.1016\/j.nrleng.2015.06.007","target":"10.1017\/CBO9780511545078.015"},{"source":"10.1016\/j.chb.2015.08.029","target":"10.1089\/10949310050078779"},{"source":"10.1016\/j.chb.2015.08.029","target":"10.1089\/109493103322278781"},{"source":"10.1016\/j.chb.2015.08.029","target":"10.4018\/978-1-60960-854-5.ch016"},{"source":"10.1016\/j.chb.2015.08.029","target":"10.1162\/1054746053967012"},{"source":"10.1016\/j.chb.2015.08.029","target":"10.1097\/00001199-200210000-00002"},{"source":"10.1016\/j.chb.2015.08.029","target":"10.1089\/109493101750527042"},{"source":"10.1016\/j.chb.2015.08.029","target":"10.1016\/j.jneumeth.2013.07.005"},{"source":"10.1016\/j.chb.2015.08.029","target":"978-0-671-69363-3"},{"source":"10.1016\/j.jagp.2014.04.009","target":"10.1162\/1054746011470208"},{"source":"10.1016\/j.jphys.2015.05.017","target":"10.1037\/0090-5550.46.3.296"},{"source":"10.1016\/j.cpr.2014.10.003","target":"10.1027\/1864-1105.21.3.95"},{"source":"10.1016\/j.cpr.2014.10.003","target":"10.1016\/j.ijhcs.2011.06.002"},{"source":"10.1016\/j.cpr.2014.10.003","target":"10.1002\/cpp.524"},{"source":"10.1016\/j.cpr.2014.10.003","target":"10.2217\/npy.11.5"},{"source":"10.1016\/j.cpr.2014.10.003","target":"10.1016\/j.beth.2005.04.004"},{"source":"10.1016\/j.compmedimag.2013.01.009","target":"0916-8532"}], function (err, graph) {
  if (err) throw err;

  simulation.nodes(graph.nodes);
  simulation.force("link")
    .links(graph.links);
  simulation.on("tick", update);

  canvas
      .call(d3.drag()
          .container(canvas.node())
          .subject(dragsubject)
          .on("start", dragstarted)
          .on("drag", dragged)
          .on("end", dragended));

  function update() {
    ctx.clearRect(0, 0, width, height);

    ctx.beginPath();
    ctx.globalAlpha = 0.1;
    ctx.strokeStyle = "#aaa";
    graph.links.forEach(drawLink);
    ctx.stroke();


    ctx.globalAlpha = 1.0;
    graph.nodes.forEach(drawNode);
  }

  function dragsubject() {
    return simulation.find(d3.event.x, d3.event.y);
  }

});

function dragstarted() {
  if (!d3.event.active) simulation.alphaTarget(0.3).restart();
  d3.event.subject.fx = d3.event.subject.x;
  d3.event.subject.fy = d3.event.subject.y;
  console.log(d3.event.subject);
}

function dragged() {
  d3.event.subject.fx = d3.event.x;
  d3.event.subject.fy = d3.event.y;
}

function dragended() {
  if (!d3.event.active) simulation.alphaTarget(0);
  d3.event.subject.fx = null;
  d3.event.subject.fy = null;
}



function drawNode(d) {
  ctx.beginPath();
  ctx.fillStyle = color(d.party);
  ctx.moveTo(d.x, d.y);
  ctx.arc(d.x, d.y, r, 0, Math.PI*2);
  ctx.fill();
}

function drawLink(l) {
  ctx.moveTo(l.source.x, l.source.y);
  ctx.lineTo(l.target.x, l.target.y);
}




</script>

</body>
</html>
